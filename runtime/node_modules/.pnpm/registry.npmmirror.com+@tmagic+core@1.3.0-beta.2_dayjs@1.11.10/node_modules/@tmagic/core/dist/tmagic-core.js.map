{"version":3,"file":"tmagic-core.js","sources":["../src/Env.ts","../src/events.ts","../src/Store.ts","../src/Node.ts","../src/Page.ts","../src/utils.ts","../src/App.ts"],"sourcesContent":["/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2023 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass Env {\n  isIos = false;\n  isIphone = false;\n  isIpad = false;\n  isAndroid = false;\n  isAndroidPad = false;\n  isMac = false;\n  isWin = false;\n  isMqq = false;\n  isWechat = false;\n  isWeb = false;\n\n  constructor(ua = globalThis.navigator.userAgent, options: Record<string, boolean | string> = {}) {\n    this.isIphone = ua.indexOf('iPhone') >= 0;\n\n    this.isIpad = /(iPad).*OS\\s([\\d_]+)/.test(ua);\n\n    this.isIos = this.isIphone || this.isIpad;\n\n    this.isAndroid = ua.indexOf('Android') >= 0;\n\n    this.isAndroidPad = this.isAndroid && ua.indexOf('Mobile') < 0;\n\n    this.isMac = ua.indexOf('Macintosh') >= 0;\n\n    this.isWin = ua.indexOf('Windows') >= 0;\n\n    this.isMqq = /QQ\\/([\\d.]+)/.test(ua);\n\n    this.isWechat = ua.indexOf('MicroMessenger') >= 0 && ua.indexOf('wxwork') < 0;\n\n    this.isWeb = !this.isIos && !this.isAndroid && !/(WebOS|BlackBerry)/.test(ua);\n\n    Object.entries(options).forEach(([key, value]) => {\n      (this as any)[key] = value;\n    });\n  }\n}\n\nexport default Env;\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2023 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 通用的事件处理\n */\n\nimport App from './App';\nimport Node from './Node';\n\nexport interface EventOption {\n  label: string;\n  value: string;\n}\n\nconst COMMON_EVENT_PREFIX = 'magic:common:events:';\nconst COMMON_METHOD_PREFIX = 'magic:common:actions:';\nconst CommonMethod = {\n  SHOW: 'show',\n  HIDE: 'hide',\n  SCROLL_TO_VIEW: 'scrollIntoView',\n  SCROLL_TO_TOP: 'scrollToTop',\n};\n\nexport const DEFAULT_EVENTS: EventOption[] = [{ label: '点击', value: `${COMMON_EVENT_PREFIX}click` }];\n\nexport const DEFAULT_METHODS: EventOption[] = [];\n\nexport const getCommonEventName = (commonEventName: string) => {\n  if (commonEventName.startsWith(COMMON_EVENT_PREFIX)) return commonEventName;\n  return `${COMMON_EVENT_PREFIX}${commonEventName}`;\n};\n\nexport const isCommonMethod = (methodName: string) => methodName.startsWith(COMMON_METHOD_PREFIX);\n\n// 点击在组件内的某个元素上，需要向上寻找到当前组件\nconst getDirectComponent = (element: HTMLElement | null, app: App): Node | Boolean => {\n  if (!element) {\n    return false;\n  }\n\n  if (!element.id) {\n    return getDirectComponent(element.parentElement, app);\n  }\n\n  const node = app.page?.getNode(element.id);\n  if (!node) {\n    return false;\n  }\n\n  return node;\n};\n\nconst commonClickEventHandler = (app: App, eventName: string, e: any) => {\n  const node = getDirectComponent(e.target, app);\n\n  if (node) {\n    app.emit(getCommonEventName(eventName), node);\n  }\n};\n\nexport const bindCommonEventListener = (app: App) => {\n  if (app.jsEngine !== 'browser') return;\n\n  window.document.body.addEventListener('click', (e: any) => {\n    commonClickEventHandler(app, 'click', e);\n  });\n\n  window.document.body.addEventListener(\n    'click',\n    (e: any) => {\n      commonClickEventHandler(app, 'click:capture', e);\n    },\n    true,\n  );\n};\n\nexport const triggerCommonMethod = (methodName: string, node: Node) => {\n  const { instance } = node;\n\n  if (!instance) return;\n\n  switch (methodName.replace(COMMON_METHOD_PREFIX, '')) {\n    case CommonMethod.SHOW:\n      instance.show();\n      break;\n\n    case CommonMethod.HIDE:\n      instance.hide();\n      break;\n\n    case CommonMethod.SCROLL_TO_VIEW:\n      instance.$el?.scrollIntoView({ behavior: 'smooth' });\n      break;\n\n    case CommonMethod.SCROLL_TO_TOP:\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      break;\n\n    default:\n      break;\n  }\n};\n","export default class Store {\n  private data: Record<string, any> = {};\n\n  public set(key: string, value: any) {\n    this.data[key] = value;\n  }\n\n  public get(key: string) {\n    return this.data[key];\n  }\n}\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2023 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'events';\n\nimport { isEmpty } from 'lodash-es';\n\nimport { DeprecatedEventConfig, EventConfig, HookType, MComponent, MContainer, MPage } from '@tmagic/schema';\n\nimport type App from './App';\nimport type Page from './Page';\nimport Store from './Store';\n\ninterface NodeOptions {\n  config: MComponent | MContainer;\n  page?: Page;\n  parent?: Node;\n  app: App;\n}\nclass Node extends EventEmitter {\n  public data: MComponent | MContainer | MPage;\n  public style?: {\n    [key: string]: any;\n  };\n  public events: DeprecatedEventConfig[] | EventConfig[];\n  public instance?: any;\n  public page?: Page;\n  public parent?: Node;\n  public app: App;\n  public store = new Store();\n\n  constructor(options: NodeOptions) {\n    super();\n\n    this.page = options.page;\n    this.parent = options.parent;\n    this.app = options.app;\n    const { events } = options.config;\n    this.data = options.config;\n    this.events = events || [];\n    this.listenLifeSafe();\n  }\n\n  public setData(data: MComponent | MContainer | MPage) {\n    this.data = data;\n    this.emit('updata-data');\n  }\n\n  public destroy() {\n    this.removeAllListeners();\n  }\n\n  private listenLifeSafe() {\n    this.once('created', async (instance: any) => {\n      this.once('destroy', () => {\n        this.instance = null;\n        if (typeof this.data.destroy === 'function') {\n          this.data.destroy(this);\n        }\n\n        this.listenLifeSafe();\n      });\n\n      this.instance = instance;\n      await this.runCodeBlock('created');\n    });\n\n    this.once('mounted', async (instance: any) => {\n      this.instance = instance;\n\n      const eventConfigQueue = this.app.eventQueueMap[instance.config.id] || [];\n\n      for (let eventConfig = eventConfigQueue.shift(); eventConfig; eventConfig = eventConfigQueue.shift()) {\n        this.app.compActionHandler(eventConfig.eventConfig, eventConfig.fromCpt, eventConfig.args);\n      }\n\n      await this.runCodeBlock('mounted');\n    });\n  }\n\n  private async runCodeBlock(hook: string) {\n    if (typeof this.data[hook] === 'function') {\n      // 兼容旧的数据格式\n      await this.data[hook](this);\n      return;\n    }\n    if (this.data[hook]?.hookType !== HookType.CODE || isEmpty(this.app.codeDsl)) return;\n    for (const item of this.data[hook].hookData) {\n      const { codeId, params = {} } = item;\n\n      const functionContent = this.app.codeDsl?.[codeId]?.content;\n\n      if (typeof functionContent === 'function') {\n        await functionContent({ app: this.app, params });\n      }\n    }\n  }\n}\n\nexport default Node;\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2023 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Id, MComponent, MContainer, MPage } from '@tmagic/schema';\n\nimport type App from './App';\nimport Node from './Node';\ninterface ConfigOptions {\n  config: MPage;\n  app: App;\n}\n\nclass Page extends Node {\n  public nodes = new Map<Id, Node>();\n\n  constructor(options: ConfigOptions) {\n    super(options);\n\n    this.setNode(options.config.id, this);\n    this.initNode(options.config, this);\n  }\n\n  public initNode(config: MComponent | MContainer, parent: Node) {\n    const node = new Node({\n      config,\n      parent,\n      page: this,\n      app: this.app,\n    });\n\n    this.setNode(config.id, node);\n\n    config.items?.forEach((element: MComponent | MContainer) => {\n      this.initNode(element, node);\n    });\n  }\n\n  public getNode(id: Id) {\n    return this.nodes.get(id);\n  }\n\n  public setNode(id: Id, node: Node) {\n    this.nodes.set(id, node);\n  }\n\n  public deleteNode(id: Id) {\n    this.nodes.delete(id);\n  }\n\n  public destroy(): void {\n    super.destroy();\n\n    this.nodes.clear();\n  }\n}\n\nexport default Page;\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2023 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const style2Obj = (style: string) => {\n  if (typeof style !== 'string') {\n    return style;\n  }\n\n  const obj: Record<string, any> = {};\n  style.split(';').forEach((element) => {\n    if (!element) {\n      return;\n    }\n\n    const items = element.split(':');\n\n    let key = items.shift();\n    let value = items.join(':');\n\n    if (!key) return;\n\n    key = key.replace(/^\\s*/, '').replace(/\\s*$/, '');\n    value = value.replace(/^\\s*/, '').replace(/\\s*$/, '');\n\n    key = key\n      .split('-')\n      .map((v, i) => (i > 0 ? `${v[0].toUpperCase()}${v.substr(1)}` : v))\n      .join('');\n\n    obj[key] = value;\n  });\n  return obj;\n};\n\nexport const fillBackgroundImage = (value: string) => {\n  if (value && !/^url/.test(value) && !/^linear-gradient/.test(value)) {\n    return `url(${value})`;\n  }\n  return value;\n};\n\nexport const isNumber = (value: string) => /^(-?\\d+)(\\.\\d+)?$/.test(value);\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2023 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'events';\n\nimport { has, isEmpty } from 'lodash-es';\n\nimport { createDataSourceManager, DataSourceManager } from '@tmagic/data-source';\nimport {\n  ActionType,\n  type AppCore,\n  type CodeBlockDSL,\n  type CodeItemConfig,\n  type CompItemConfig,\n  type DataSourceItemConfig,\n  type DeprecatedEventConfig,\n  type EventConfig,\n  type Id,\n  type MApp,\n  type RequestFunction,\n} from '@tmagic/schema';\n\nimport Env from './Env';\nimport { bindCommonEventListener, isCommonMethod, triggerCommonMethod } from './events';\nimport type Node from './Node';\nimport Page from './Page';\nimport { fillBackgroundImage, isNumber, style2Obj } from './utils';\n\ninterface AppOptionsConfig {\n  ua?: string;\n  config?: MApp;\n  platform?: 'editor' | 'mobile' | 'tv' | 'pc';\n  jsEngine?: 'browser' | 'hippy';\n  designWidth?: number;\n  curPage?: Id;\n  transformStyle?: (style: Record<string, any>) => Record<string, any>;\n  request?: RequestFunction;\n}\n\ninterface EventCache {\n  eventConfig: CompItemConfig | DeprecatedEventConfig;\n  fromCpt: any;\n  args: any[];\n}\n\nclass App extends EventEmitter implements AppCore {\n  public env: Env = new Env();\n  public dsl?: MApp;\n  public codeDsl?: CodeBlockDSL;\n  public dataSourceManager?: DataSourceManager;\n\n  public page?: Page;\n\n  public platform = 'mobile';\n  public jsEngine = 'browser';\n  public designWidth = 375;\n  public request?: RequestFunction;\n\n  public components = new Map();\n\n  public eventQueueMap: Record<string, EventCache[]> = {};\n\n  private eventList = new Map<(fromCpt: Node, ...args: any[]) => void, string>();\n\n  constructor(options: AppOptionsConfig) {\n    super();\n\n    this.setEnv(options.ua);\n    // 代码块描述内容在dsl codeBlocks字段\n    this.codeDsl = options.config?.codeBlocks;\n    options.platform && (this.platform = options.platform);\n    options.jsEngine && (this.jsEngine = options.jsEngine);\n\n    if (typeof options.designWidth !== 'undefined') {\n      this.setDesignWidth(options.designWidth);\n    }\n\n    if (options.transformStyle) {\n      this.transformStyle = options.transformStyle;\n    }\n\n    if (options.request) {\n      this.request = options.request;\n    }\n\n    if (options.config) {\n      this.setConfig(options.config, options.curPage);\n    }\n\n    bindCommonEventListener(this);\n  }\n\n  public setEnv(ua?: string) {\n    this.env = new Env(ua);\n  }\n\n  public setDesignWidth(width: number) {\n    this.designWidth = width;\n    // 根据屏幕大小计算出跟节点的font-size，用于rem样式的适配\n    if (this.jsEngine === 'browser') {\n      this.calcFontsize();\n      globalThis.removeEventListener('resize', this.calcFontsize);\n      globalThis.addEventListener('resize', this.calcFontsize);\n    }\n  }\n\n  /**\n   * 将dsl中的style配置转换成css，主要是将数值转成rem为单位的样式值，例如100将被转换成1rem\n   * @param style Object\n   * @returns Object\n   */\n  public transformStyle(style: Record<string, any> | string) {\n    if (!style) {\n      return {};\n    }\n\n    let styleObj: Record<string, any> = {};\n    const results: Record<string, any> = {};\n\n    if (typeof style === 'string') {\n      styleObj = style2Obj(style);\n    } else {\n      styleObj = { ...style };\n    }\n\n    const isHippy = this.jsEngine === 'hippy';\n\n    const whiteList = ['zIndex', 'opacity', 'fontWeight'];\n    Object.entries(styleObj).forEach(([key, value]) => {\n      if (key === 'scale' && !results.transform && isHippy) {\n        results.transform = [{ scale: value }];\n      } else if (key === 'backgroundImage' && !isHippy) {\n        value && (results[key] = fillBackgroundImage(value));\n      } else if (key === 'transform' && typeof value !== 'string') {\n        results[key] = this.getTransform(value);\n      } else if (!whiteList.includes(key) && value && /^[-]?[0-9]*[.]?[0-9]*$/.test(value)) {\n        results[key] = isHippy ? value : `${value / 100}rem`;\n      } else {\n        results[key] = value;\n      }\n    });\n\n    return results;\n  }\n\n  /**\n   * 设置dsl\n   * @param config dsl跟节点\n   * @param curPage 当前页面id\n   */\n  public setConfig(config: MApp, curPage?: Id) {\n    this.dsl = config;\n\n    if (!curPage && config.items.length) {\n      curPage = config.items[0].id;\n    }\n\n    if (this.dataSourceManager) {\n      this.dataSourceManager.destroy();\n    }\n\n    this.dataSourceManager = createDataSourceManager(this);\n\n    this.codeDsl = config.codeBlocks;\n    this.setPage(curPage || this.page?.data?.id);\n  }\n\n  /**\n   * 留着为了兼容，不让报错\n   * @deprecated\n   */\n  public addPage() {\n    console.info('addPage 已经弃用');\n  }\n\n  public setPage(id?: Id) {\n    const pageConfig = this.dsl?.items.find((page) => page.id === id);\n\n    if (!pageConfig) {\n      if (this.page) {\n        this.page.destroy();\n        this.page = undefined;\n      }\n\n      super.emit('page-change');\n      return;\n    }\n\n    if (pageConfig === this.page?.data) return;\n\n    if (this.page) {\n      this.page.destroy();\n    }\n\n    this.page = new Page({\n      config: pageConfig,\n      app: this,\n    });\n\n    super.emit('page-change', this.page);\n\n    this.bindEvents();\n  }\n\n  public deletePage() {\n    this.page = undefined;\n  }\n\n  /**\n   * 兼容id参数\n   * @param id 节点id\n   * @returns Page | void\n   */\n  public getPage(id?: Id) {\n    if (!id) return this.page;\n    if (this.page?.data.id === id) {\n      return this.page;\n    }\n  }\n\n  public registerComponent(type: string, Component: any) {\n    this.components.set(type, Component);\n  }\n\n  public unregisterComponent(type: string) {\n    this.components.delete(type);\n  }\n\n  public resolveComponent(type: string) {\n    return this.components.get(type);\n  }\n\n  public bindEvents() {\n    Array.from(this.eventList.keys()).forEach((handler) => {\n      const name = this.eventList.get(handler);\n      name && this.off(name, handler);\n    });\n\n    this.eventList.clear();\n\n    if (!this.page) return;\n\n    for (const [, value] of this.page.nodes) {\n      value.events?.forEach((event) => {\n        const eventName = `${event.name}_${value.data.id}`;\n        const eventHanlder = (fromCpt: Node, ...args: any[]) => {\n          this.eventHandler(event, fromCpt, args);\n        };\n        this.eventList.set(eventHanlder, eventName);\n        this.on(eventName, eventHanlder);\n      });\n    }\n  }\n\n  public emit(name: string | symbol, node: any, ...args: any[]): boolean {\n    if (node?.data?.id) {\n      return super.emit(`${String(name)}_${node.data.id}`, node, ...args);\n    }\n    return super.emit(name, node, ...args);\n  }\n\n  /**\n   * 执行代码块动作\n   * @param eventConfig 代码动作的配置\n   * @returns void\n   */\n  public async codeActionHandler(eventConfig: CodeItemConfig) {\n    const { codeId = '', params = {} } = eventConfig;\n    if (!codeId || isEmpty(this.codeDsl)) return;\n    if (this.codeDsl![codeId] && typeof this.codeDsl![codeId]?.content === 'function') {\n      await this.codeDsl![codeId].content({ app: this, params });\n    }\n  }\n\n  /**\n   * 执行联动组件动作\n   * @param eventConfig 联动组件的配置\n   * @returns void\n   */\n  public async compActionHandler(eventConfig: CompItemConfig | DeprecatedEventConfig, fromCpt: any, args: any[]) {\n    if (!this.page) throw new Error('当前没有页面');\n\n    const { method: methodName, to } = eventConfig;\n    const toNode = this.page.getNode(to);\n    if (!toNode) throw `ID为${to}的组件不存在`;\n\n    if (isCommonMethod(methodName)) {\n      return triggerCommonMethod(methodName, toNode);\n    }\n\n    if (toNode.instance) {\n      if (typeof toNode.instance[methodName] === 'function') {\n        await toNode.instance[methodName](fromCpt, ...args);\n      }\n    } else {\n      this.addEventToMap({\n        eventConfig,\n        fromCpt,\n        args,\n      });\n    }\n  }\n\n  public async dataSourceActionHandler(eventConfig: DataSourceItemConfig) {\n    const { dataSourceMethod = [], params = {} } = eventConfig;\n\n    const [id, methodName] = dataSourceMethod;\n\n    if (!id || !methodName) return;\n\n    const dataSource = this.dataSourceManager?.get(id);\n\n    if (!dataSource) return;\n\n    const methods = dataSource.getMethods() || [];\n\n    const method = methods.find((item) => item.name === methodName);\n\n    if (!method) return;\n\n    if (typeof method.content === 'function') {\n      await method.content({ app: this, params, dataSource });\n    }\n  }\n\n  public destroy() {\n    this.removeAllListeners();\n    this.page = undefined;\n\n    if (this.jsEngine === 'browser') {\n      globalThis.removeEventListener('resize', this.calcFontsize);\n    }\n  }\n\n  /**\n   * 事件联动处理函数\n   * @param eventConfig 事件配置\n   * @param fromCpt 触发事件的组件\n   * @param args 事件参数\n   */\n  private async eventHandler(eventConfig: EventConfig | DeprecatedEventConfig, fromCpt: any, args: any[]) {\n    if (has(eventConfig, 'actions')) {\n      // EventConfig类型\n      const { actions } = eventConfig as EventConfig;\n      for (const actionItem of actions) {\n        if (actionItem.actionType === ActionType.COMP) {\n          // 组件动作\n          await this.compActionHandler(actionItem as CompItemConfig, fromCpt, args);\n        } else if (actionItem.actionType === ActionType.CODE) {\n          // 执行代码块\n          await this.codeActionHandler(actionItem as CodeItemConfig);\n        } else if (actionItem.actionType === ActionType.DATA_SOURCE) {\n          await this.dataSourceActionHandler(actionItem as DataSourceItemConfig);\n        }\n      }\n    } else {\n      // 兼容DeprecatedEventConfig类型 组件动作\n      await this.compActionHandler(eventConfig as DeprecatedEventConfig, fromCpt, args);\n    }\n  }\n\n  private addEventToMap(event: EventCache) {\n    if (this.eventQueueMap[event.eventConfig.to]) {\n      this.eventQueueMap[event.eventConfig.to].push(event);\n    } else {\n      this.eventQueueMap[event.eventConfig.to] = [event];\n    }\n  }\n\n  private getTransform(value: Record<string, string>) {\n    if (!value) return [];\n\n    const transform = Object.entries(value).map(([transformKey, transformValue]) => {\n      if (!transformValue.trim()) return '';\n      if (transformKey === 'rotate' && isNumber(transformValue)) {\n        transformValue = `${transformValue}deg`;\n      }\n\n      return this.jsEngine !== 'hippy' ? `${transformKey}(${transformValue})` : { [transformKey]: transformValue };\n    });\n\n    if (this.jsEngine === 'hippy') {\n      return transform;\n    }\n    const values = transform.join(' ');\n    return !values.trim() ? 'none' : values;\n  }\n\n  private calcFontsize() {\n    const { width } = document.documentElement.getBoundingClientRect();\n    const fontSize = width / (this.designWidth / 100);\n    document.documentElement.style.fontSize = `${fontSize}px`;\n  }\n}\n\nexport default App;\n"],"names":["Node","Env","Page"],"mappings":"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"}